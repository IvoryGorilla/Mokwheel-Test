{% comment %}
  {% render 'cart-discount-price' , cart: cart , bs: block.settings %}
{% endcomment %}

{%- assign total_compare_price = 0 -%}
{%- for line_item in cart.items -%}
  {%- assign compare_price = line_item.variant.compare_at_price -%}
  {%- assign original_price = line_item.original_price -%}
  {%- if compare_price != blank -%}
    {%- if compare_price > original_price -%}
      {%- assign compare_price = compare_price -%}
      {%- assign compare_price = compare_price | times: line_item.quantity -%}
    {%- else -%}
      {%- assign compare_price = original_price | times: line_item.quantity -%}
    {%- endif -%}
  {%- else -%}
    {%- assign compare_price = original_price | times: line_item.quantity -%}
  {%- endif -%}
  {%- assign total_compare_price = compare_price | plus: total_compare_price -%}
{%- endfor -%}

{%- if total_compare_price > cart.total_price -%}
  {%- assign total_discount = total_compare_price | minus: cart.total_price -%}
  <div class="totals_discount" data-total-discount="{{ total_discount }}">
    <span>
      {{ bs.saving_text }}
      <b> {{ total_discount | money }}</b>
    </span>
  </div>
{%- endif -%}
