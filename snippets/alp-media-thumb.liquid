{% comment %}
  Use:
  {% render 'alp-media-thumb', image: image, image_mobile: image_mobile, desktop_width: 1280, mobile_width: 600, aspect_ratio: '1/1',alt: 'Alt text' %}
{% endcomment %}

{%- assign desktop = desktop_width | default: 1280 -%}
{%- assign mobile = mobile_width | default: 600 -%}
{%- assign mobile_img = image_mobile | default: image -%}
{%- capture aspect_ratio_style -%}
    {%- if aspect_ratio != blank -%}
        --aspect-ratio:{{ aspect_ratio }}
    {%- endif -%}
{%- endcapture -%}

{%- case image.media_type -%}
  {% when 'image' %}
    <picture style="{{ aspect_ratio_style }}">
      <source srcset="{{ image | image_url: width: desktop }}" media="(min-width: 768px)">
      <img
        data-src="{{ mobile_img | image_url: width: mobile }}"
        alt="{{ alt | default: '' }}"
        loading="lazy"
        width="auto"
        height="auto"
        class="lazy"
      >
    </picture>
  {% when 'video' %}
    <div class="media_video_thumb" style="{{ aspect_ratio_style }}" data-media-id="{{ media.id }}" data-alp-media-thumb>
      {% render 'icon-play-2' %}
      {{
        image
        | image_url: width: desktop
        | image_tag:
          widths: '200, 300, 400, 500, 600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 2200',
          alt: alt
        | default: ''
      }}
    </div>
{%- endcase -%}
