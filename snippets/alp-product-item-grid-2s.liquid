{% comment %}
  use snippet alp-product-item-1.liquid
  Accepts:
    product
  Usage:
  {% render 'alp-product-item-grid', product: product , aspect_ratio: aspect_ratio %}
{% endcomment %}

{%- assign show_features = show_features | default: false -%}
{%- assign show_icon_features = show_icon_features | default: true -%}
{%- assign show_discount_badge = show_discount_badge | default: true -%}
{%- assign show_reviews = show_reviews | default: false -%}
{%- assign show_description = show_description | default: true -%}

<div
  class="alp-product-item-grid alp-product-item-wrapper type-grid-2s"
  data-swatch-wrapper
  data-href="{{ product.url }}"
  style="--aspect-ratio:{{ aspect_ratio | default: '1/1' }}"
>
  <div class="alp-grid-container-image {% unless show_reviews %} no_reviews{% endunless %} {% unless show_features %} no_features{% endunless %}">
    <div class="alp-product-item-image">
      {%- if product.variants.size > 0 -%}
        {% for variant in product.variants %}
          {% liquid
            assign options_string = ''
            for option in variant.options
              assign options_string = options_string | append: option | append: ','
            endfor
          %}
          <div
            class="product-item-image-i {% if forloop.index == 1 %} active{% endif %}"
            data-variant="{{ variant.id }}"
            data-options="{{ options_string }}"
          >
            {%- assign alt_title = product.title | append: ' - ' | append: variant.title -%}
            {%- if variant.image -%}
              {% render 'alp-single-image',
                image: variant.image,
                width: 1280,
                aspect_ratio: aspect_ratio,
                alt: alt_title
              %}
            {%- else -%}
              {% render 'alp-single-image',
                image: product.featured_image,
                width: 1280,
                aspect_ratio: aspect_ratio,
                alt: product.title
              %}
            {%- endif -%}
          </div>
        {% endfor %}
      {%- else -%}
        {% render 'alp-single-image',
          image: product.featured_image,
          width: 1280,
          aspect_ratio: aspect_ratio,
          alt: product.title
        %}
      {%- endif -%}
    </div>
    <a class="alp-product-item-link full-aa" href="{{ product.url }}" title="{{ product.title }}"></a>
  </div>

  <div class="alp-grid-item-info-wrapper-2s">
    <h2 class="headline__h6l">{{ product.title }}</h2>
    <div class="alp-product-item-info-prices-flex-2s">
      <div class="alp-product-item-price">{% render 'price', product: product %}</div>
      {% comment %} {% render 'quick-add-button', product: product %} {% endcomment %}
      {% render 'list-buy-button-new', product: product %}
    </div>
  </div>
</div>
